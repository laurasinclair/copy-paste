<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Copying and pasting things</title>
		<meta name="description" content="" />
		<meta name="author" content="" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="css/main.css" />
		<link rel="icon" type="image/png" href="favicon.png" />
	</head>
	<body>
		<div id="app">
			<p data-copy="1">
				Try copying that text. I doubledare you.
			</p>
			<p data-copy="2">
				Or this one.
			</p>
			<p data-copy="3">
				Or even this one.
			</p>
		</div>

		<script>
			window.onload = function () {
				const copyHandlers = [
					{
						dataAttr: "1",
						transform: () => "Told ya!",
					},
					{
						dataAttr: "2",
						transform: (text) => text.toUpperCase(),
					},
					{
						dataAttr: "3",
						transform: (text) => `游붙游붙游붙 ${text} 游붙游붙游붙`,
					},
				];

				copyHandlers.forEach(({ dataAttr, transform }) => {
					const elements = document.querySelectorAll(`[data-copy="${dataAttr}"]`);
					if (!elements) return;

					elements.forEach((el) => {
						el.addEventListener("copy", function (e) {
							e.preventDefault();
							if (!e.clipboardData) return;

							const selectedText = window.getSelection().toString();
							e.clipboardData.setData("text/plain", transform(selectedText));
						});
					});
				});
			};
		</script>
	</body>
</html>
